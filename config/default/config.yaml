apiVersion: config.bankdata.dk/v2alpha2
kind: ProjectConfig
#controllerClass:
deletionProtectionDefault: false
#disableCRDWebhooks:
readOnly: true
enableMigrations: false
enableDeltaBundlesDefault: false # This does affect the thingy
#gitCredentials:
logLevel: 0
# leaderElection:
#   leaseDuration: "60s"
#   renewDeadline: "30s"
#   retryPeriod: "5s"
notificationWebhooks: {}
  # systemDatasourceChanged: google.com
  # libraryDatasourceChanged: test.dk
#sentry:
#sso:
styra:
  address: https://styra-url.example.com
  token: styra-token
#  tokenSecretPath: /etc/styra-controller-token/styra_token

opaControlPlaneConfig:
  address: https://ocp-host/ocp
  token: ocp-token
  gitCredentials:
    - id: git-credential-id
      repoPrefix: https://github.com
  bundleObjectStorage:
    s3:
      bucket: ocp
      region: us-east-1
      url: https://minio-host
      ocpConfigSecretName: minio # Name of secret in ocp config
  defaultRequirements:
    - library1

# used by controller to create users and policies
userCredentialHandler:
  s3:
    bucket: ocp
    url: https://minio-host
    region: us-east-1 #default use for minio
    accessKeyID: minio-access-key
    secretAccessKey: minio-secret-key

#systemPrefix:
#systemSuffix:
systemUserRoles:
  - SystemOwner
  - SystemMetadataManager

#datasourceIgnorePatterns:
# - "^systems/[a-z0-9]+/dontdeleteme/.*"
# - "^libraries/[a-z0-9_]+/deletemenot/.*"

#decisionsExporter:

opa:
  bundleServer:
    url: https://minio-host
    path: /ocp
  metrics:
    prometheus:
      http:
        buckets:
        - 0.0005
        - 0.001
        - 0.002
        - 0.003
        - 0.004
        - 0.005
        - 0.006
        - 0.007
        - 0.008
        - 0.009
        - 0.01
        - 0.02
        - 0.03
        - 0.04
        - 0.05
        - 0.06
        - 0.07
        - 0.08
        - 0.09
        - 0.1
        - 0.2
        - 0.3
        - 0.4
        - 0.5
        - 0.6
        - 0.7
        - 0.8
        - 0.9
        - 1

#activityExporter:

podRestart:
  slpRestart:
    enabled: true
    deploymentType: StatefulSet

# opa:
#  decision_logs:
#    request_context:
#      http:
#        headers:
#          - "Accept"
